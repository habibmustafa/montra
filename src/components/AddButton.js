import React, { useState } from "react";
import {
   TouchableWithoutFeedback,
   View,
   StyleSheet,
   Animated,
} from "react-native";
import Svg, { Path, Mask } from "react-native-svg";

const AddButton = () => {
   const animation = React.useRef(new Animated.Value(0)).current;
   const [opened, setOpened] = useState(false);

   React.useEffect(() => {
      Animated.timing(animation, {
         toValue: opened ? 1 : 0,
         duration: 300,
         friction: 2,
         useNativeDriver: false,
      }).start();
   }, [opened, animation]);

   const opacity = {
      opacity: animation.interpolate({
         inputRange: [0, 0.5, 1],
         outputRange: [0, 0, 1],
      }),
   };

   return (
      <View style={styles.container}>
         <View style={styles.box}>
            <TouchableWithoutFeedback>
               <Animated.View
                  style={[
                     styles.item,
                     opacity,
                     {
                        transform: [
                           {
                              translateX: animation.interpolate({
                                 inputRange: [0, 1],
                                 outputRange: [0, -80],
                              }),
                           },
                           {
                              translateY: animation.interpolate({
                                 inputRange: [0, 1],
                                 outputRange: [0, -70],
                              }),
                           },
                        ],
                     },
                     { backgroundColor: "#00A86B" },
                  ]}
               >
                  <Svg
                     width="24"
                     height="28"
                     viewBox="0 0 24 28"
                     fill="none"
                     xmlns="http://www.w3.org/2000/svg"
                  >
                     <Path
                        d="M19 12L5 12C3.67392 12 2.40215 12.5268 1.46447 13.4645C0.526784 14.4021 0 15.6739 0 17L0 23C0 24.3261 0.526784 25.5979 1.46447 26.5355C2.40215 27.4732 3.67392 28 5 28H19C20.3261 28 21.5979 27.4732 22.5355 26.5355C23.4732 25.5979 24 24.3261 24 23V17C24 15.6739 23.4732 14.4021 22.5355 13.4645C21.5979 12.5268 20.3261 12 19 12V12ZM12 24C11.2089 24 10.4355 23.7654 9.77772 23.3259C9.11992 22.8864 8.60723 22.2616 8.30448 21.5307C8.00173 20.7998 7.92252 19.9956 8.07686 19.2196C8.2312 18.4437 8.61216 17.731 9.17157 17.1716C9.73098 16.6122 10.4437 16.2312 11.2196 16.0769C11.9956 15.9225 12.7998 16.0017 13.5307 16.3045C14.2616 16.6072 14.8864 17.1199 15.3259 17.7777C15.7654 18.4355 16 19.2089 16 20C16 21.0609 15.5786 22.0783 14.8284 22.8284C14.0783 23.5786 13.0609 24 12 24Z"
                        fill="#FCFCFC"
                     />
                     <Path
                        d="M12 22C13.1046 22 14 21.1046 14 20C14 18.8954 13.1046 18 12 18C10.8954 18 10 18.8954 10 20C10 21.1046 10.8954 22 12 22Z"
                        fill="#FCFCFC"
                     />
                     <Path
                        d="M12 0C11.7348 0 11.4805 0.105357 11.2929 0.292893C11.1054 0.48043 11 0.734784 11 1V6.59L8.46003 4.05C8.26873 3.88617 8.02265 3.80057 7.77097 3.81029C7.5193 3.82001 7.28056 3.92434 7.10246 4.10244C6.92437 4.28053 6.82004 4.51927 6.81032 4.77095C6.80059 5.02262 6.8862 5.2687 7.05003 5.46L11.29 9.71C11.3822 9.79995 11.4908 9.87126 11.61 9.92C11.7334 9.97226 11.866 9.99919 12 9.99919C12.134 9.99919 12.2666 9.97226 12.39 9.92C12.5092 9.87126 12.6179 9.79995 12.71 9.71L17 5.46C17.1639 5.2687 17.2495 5.02262 17.2397 4.77095C17.23 4.51927 17.1257 4.28053 16.9476 4.10244C16.7695 3.92434 16.5308 3.82001 16.2791 3.81029C16.0274 3.80057 15.7813 3.88617 15.59 4.05L13 6.59V1C13 0.734784 12.8947 0.48043 12.7071 0.292893C12.5196 0.105357 12.2652 0 12 0V0Z"
                        fill="#FCFCFC"
                     />
                  </Svg>
               </Animated.View>
            </TouchableWithoutFeedback>
            <TouchableWithoutFeedback>
               <Animated.View
                  style={[
                     styles.item,
                     opacity,
                     {
                        transform: [
                           {
                              translateY: animation.interpolate({
                                 inputRange: [0, 1],
                                 outputRange: [0, -125],
                              }),
                           },
                        ],
                     },
                     { backgroundColor: "#0077FF" },
                  ]}
               >
                  <Svg
                     width="24"
                     height="24"
                     viewBox="0 0 24 24"
                     fill="none"
                     xmlns="http://www.w3.org/2000/svg"
                  >
                     <Path
                        d="M6 24C9.31371 24 12 21.3137 12 18C12 14.6863 9.31371 12 6 12C2.68629 12 0 14.6863 0 18C0 21.3137 2.68629 24 6 24Z"
                        fill="#FCFCFC"
                     />
                     <Path
                        d="M18 12C21.3137 12 24 9.31371 24 6C24 2.68629 21.3137 0 18 0C14.6863 0 12 2.68629 12 6C12 9.31371 14.6863 12 18 12Z"
                        fill="#FCFCFC"
                     />
                     <Path
                        d="M2.16004 10C2.25586 10.0359 2.35775 10.0529 2.46005 10.05C2.68062 10.0601 2.89834 9.99691 3.07924 9.87028C3.26013 9.74365 3.39403 9.56071 3.46005 9.35C3.81998 8.19967 4.40731 7.13336 5.18719 6.21434C5.96707 5.29532 6.92361 4.54231 8.00005 4V5C8.00005 5.26522 8.1054 5.51957 8.29294 5.70711C8.48048 5.89464 8.73483 6 9.00005 6C9.26526 6 9.51962 5.89464 9.70715 5.70711C9.89469 5.51957 10 5.26522 10 5V1C10 0.734784 9.89469 0.48043 9.70715 0.292893C9.51962 0.105357 9.26526 0 9.00005 0L5.00005 0C4.73483 0 4.48047 0.105357 4.29294 0.292893C4.1054 0.48043 4.00005 0.734784 4.00005 1C4.00005 1.26522 4.1054 1.51957 4.29294 1.70711C4.48047 1.89464 4.73483 2 5.00005 2L7.42005 2C6.01922 2.64011 4.76843 3.56725 3.74863 4.72141C2.72884 5.87557 1.96278 7.23101 1.50005 8.7C1.45358 8.82847 1.43393 8.96509 1.44231 9.10145C1.45069 9.2378 1.48692 9.37099 1.54876 9.4928C1.61061 9.61462 1.69675 9.72247 1.80189 9.8097C1.90702 9.89693 2.02891 9.9617 2.16004 10V10Z"
                        fill="#FCFCFC"
                     />
                     <Path
                        d="M15 18C14.7348 18 14.4804 18.1054 14.2929 18.2929C14.1054 18.4805 14 18.7348 14 19V23C14 23.2652 14.1054 23.5196 14.2929 23.7071C14.4804 23.8947 14.7348 24 15 24H19C19.2652 24 19.5196 23.8947 19.7071 23.7071C19.8946 23.5196 20 23.2652 20 23C20 22.7348 19.8946 22.4805 19.7071 22.2929C19.5196 22.1054 19.2652 22 19 22H16.57C18.1462 21.2808 19.5303 20.1994 20.6095 18.844C21.6886 17.4885 22.4323 15.8974 22.78 14.2C22.8063 14.0687 22.8064 13.9335 22.7804 13.8021C22.7544 13.6707 22.7028 13.5458 22.6285 13.4343C22.5542 13.3229 22.4587 13.2272 22.3475 13.1527C22.2362 13.0782 22.1113 13.0263 21.98 13C21.8487 12.9738 21.7135 12.9736 21.5821 12.9996C21.4507 13.0256 21.3257 13.0772 21.2143 13.1515C21.1029 13.2258 21.0072 13.3213 20.9327 13.4326C20.8581 13.5438 20.8063 13.6687 20.78 13.8C20.5085 15.1358 19.9372 16.3924 19.1092 17.4751C18.2812 18.5578 17.218 19.4382 16 20.05V19C16 18.7348 15.8946 18.4805 15.7071 18.2929C15.5196 18.1054 15.2652 18 15 18Z"
                        fill="#FCFCFC"
                     />
                  </Svg>
               </Animated.View>
            </TouchableWithoutFeedback>
            <TouchableWithoutFeedback>
               <Animated.View
                  style={[
                     styles.item,
                     opacity,
                     {
                        transform: [
                           {
                              translateX: animation.interpolate({
                                 inputRange: [0, 1],
                                 outputRange: [0, 80],
                              }),
                           },
                           {
                              translateY: animation.interpolate({
                                 inputRange: [0, 1],
                                 outputRange: [0, -70],
                              }),
                           },
                        ],
                     },
                     { backgroundColor: "#FD3C4A" },
                  ]}
               >
                  <Svg
                     width="24"
                     height="29"
                     viewBox="0 0 24 29"
                     fill="none"
                     xmlns="http://www.w3.org/2000/svg"
                  >
                     <Path
                        d="M19 13L5 13C3.67392 13 2.40215 13.5268 1.46447 14.4645C0.526784 15.4021 0 16.6739 0 18L0 24C0 25.3261 0.526784 26.5979 1.46447 27.5355C2.40215 28.4732 3.67392 29 5 29H19C20.3261 29 21.5979 28.4732 22.5355 27.5355C23.4732 26.5979 24 25.3261 24 24V18C24 16.6739 23.4732 15.4021 22.5355 14.4645C21.5979 13.5268 20.3261 13 19 13V13ZM12 25C11.2089 25 10.4355 24.7654 9.77772 24.3259C9.11992 23.8864 8.60723 23.2616 8.30448 22.5307C8.00173 21.7998 7.92252 20.9956 8.07686 20.2196C8.2312 19.4437 8.61216 18.731 9.17157 18.1716C9.73098 17.6122 10.4437 17.2312 11.2196 17.0769C11.9956 16.9225 12.7998 17.0017 13.5307 17.3045C14.2616 17.6072 14.8864 18.1199 15.3259 18.7777C15.7654 19.4355 16 20.2089 16 21C16 22.0609 15.5786 23.0783 14.8284 23.8284C14.0783 24.5786 13.0609 25 12 25Z"
                        fill="#FCFCFC"
                     />
                     <Path
                        d="M12 23C13.1046 23 14 22.1046 14 21C14 19.8954 13.1046 19 12 19C10.8954 19 10 19.8954 10 21C10 22.1046 10.8954 23 12 23Z"
                        fill="#FCFCFC"
                     />
                     <Path
                        d="M12.71 1.29C12.617 1.19627 12.5064 1.12188 12.3845 1.07111C12.2627 1.02034 12.132 0.994202 12 0.994202C11.868 0.994202 11.7372 1.02034 11.6154 1.07111C11.4935 1.12188 11.3829 1.19627 11.29 1.29L7.04996 5.54C6.85636 5.72698 6.74495 5.98321 6.74027 6.25232C6.73558 6.52144 6.83799 6.78139 7.02496 6.975C7.21194 7.16861 7.46817 7.28001 7.73729 7.2847C8.0064 7.28939 8.26636 7.18698 8.45996 7L11 4.41V10C11 10.2652 11.1053 10.5196 11.2929 10.7071C11.4804 10.8946 11.7347 11 12 11C12.2652 11 12.5195 10.8946 12.7071 10.7071C12.8946 10.5196 13 10.2652 13 10V4.41L15.54 7C15.7262 7.18474 15.9776 7.2889 16.24 7.29C16.3799 7.29761 16.5199 7.27573 16.6508 7.22577C16.7817 7.17581 16.9007 7.09889 17 7C17.1862 6.81264 17.2908 6.55919 17.2908 6.295C17.2908 6.03081 17.1862 5.77736 17 5.59L12.71 1.29Z"
                        fill="#FCFCFC"
                     />
                  </Svg>
               </Animated.View>
            </TouchableWithoutFeedback>

            <TouchableWithoutFeedback
               onPress={() => {
                  setOpened(!opened);
               }}
               style={styles.addButton}
            >
               <Animated.View
                  style={[
                     styles.addButtonInner,
                     {
                        transform: [
                           {
                              rotate: animation.interpolate({
                                 inputRange: [0, 1],
                                 outputRange: ["0deg", "45deg"],
                              }),
                           },
                        ],
                     },
                  ]}
               >
                  <Svg
                     width="26"
                     height="26"
                     viewBox="0 0 26 26"
                     fill="none"
                     xmlns="http://www.w3.org/2000/svg"
                  >
                     <Mask id="path-1-inside-1_1511_1741" fill="white">
                        <Path d="M14.5305 14.5305L24.5361 14.5305C24.7079 14.5438 24.8805 14.5215 25.0432 14.4648C25.2059 14.4082 25.3552 14.3186 25.4816 14.2016C25.6081 14.0846 25.7089 13.9427 25.7779 13.7848C25.8469 13.6269 25.8825 13.4565 25.8825 13.2842C25.8825 13.112 25.8469 12.9416 25.7779 12.7837C25.7089 12.6258 25.6081 12.4839 25.4816 12.3669C25.3552 12.2499 25.2059 12.1603 25.0432 12.1037C24.8805 12.047 24.7079 12.0247 24.5361 12.038L14.5305 12.038L14.5305 2.03241C14.5062 1.71852 14.3644 1.42535 14.1334 1.21149C13.9023 0.997633 13.5991 0.878834 13.2843 0.878833C12.9694 0.878833 12.6662 0.997633 12.4351 1.21149C12.2041 1.42535 12.0623 1.71852 12.038 2.03241L12.038 12.038L2.03242 12.038C1.70219 12.039 1.38576 12.1706 1.15225 12.4041C0.918744 12.6376 0.787126 12.954 0.786143 13.2842C0.787126 13.6145 0.918744 13.9309 1.15225 14.1644C1.38576 14.3979 1.70219 14.5295 2.03242 14.5305L12.038 14.5305L12.038 24.5361C12.039 24.8663 12.1706 25.1827 12.4041 25.4162C12.6376 25.6498 12.954 25.7814 13.2843 25.7824C13.6145 25.7814 13.9309 25.6498 14.1644 25.4162C14.3979 25.1827 14.5295 24.8663 14.5305 24.5361V14.5305Z" />
                     </Mask>
                     <Path
                        d="M14.5305 14.5305L24.5361 14.5305C24.7079 14.5438 24.8805 14.5215 25.0432 14.4648C25.2059 14.4082 25.3552 14.3186 25.4816 14.2016C25.6081 14.0846 25.7089 13.9427 25.7779 13.7848C25.8469 13.6269 25.8825 13.4565 25.8825 13.2842C25.8825 13.112 25.8469 12.9416 25.7779 12.7837C25.7089 12.6258 25.6081 12.4839 25.4816 12.3669C25.3552 12.2499 25.2059 12.1603 25.0432 12.1037C24.8805 12.047 24.7079 12.0247 24.5361 12.038L14.5305 12.038L14.5305 2.03241C14.5062 1.71852 14.3644 1.42535 14.1334 1.21149C13.9023 0.997633 13.5991 0.878834 13.2843 0.878833C12.9694 0.878833 12.6662 0.997633 12.4351 1.21149C12.2041 1.42535 12.0623 1.71852 12.038 2.03241L12.038 12.038L2.03242 12.038C1.70219 12.039 1.38576 12.1706 1.15225 12.4041C0.918744 12.6376 0.787126 12.954 0.786143 13.2842C0.787126 13.6145 0.918744 13.9309 1.15225 14.1644C1.38576 14.3979 1.70219 14.5295 2.03242 14.5305L12.038 14.5305L12.038 24.5361C12.039 24.8663 12.1706 25.1827 12.4041 25.4162C12.6376 25.6498 12.954 25.7814 13.2843 25.7824C13.6145 25.7814 13.9309 25.6498 14.1644 25.4162C14.3979 25.1827 14.5295 24.8663 14.5305 24.5361V14.5305Z"
                        fill="black"
                     />
                     <Path
                        d="M14.5305 14.5305L14.5305 12.0305H12.0305L12.0305 14.5305L14.5305 14.5305ZM24.5361 14.5305L24.7289 12.038L24.6327 12.0305H24.5361L24.5361 14.5305ZM24.5361 12.038L24.5361 14.538H24.6327L24.7289 14.5305L24.5361 12.038ZM14.5305 12.038L12.0305 12.038L12.0305 14.538L14.5305 14.538L14.5305 12.038ZM14.5305 2.03241L17.0305 2.03241V1.93585L17.0231 1.83957L14.5305 2.03241ZM12.038 2.03241L9.54543 1.83957L9.53798 1.93585V2.03241L12.038 2.03241ZM12.038 12.038L12.038 14.538L14.538 14.538L14.538 12.038H12.038ZM2.03242 12.038L2.03242 9.53796L2.02498 9.53798L2.03242 12.038ZM0.786143 13.2842L-1.71385 13.2768L-1.71387 13.2842L-1.71385 13.2917L0.786143 13.2842ZM2.03242 14.5305L2.02498 17.0305L2.03242 17.0305L2.03242 14.5305ZM12.038 14.5305L14.538 14.5305V12.0305L12.038 12.0305L12.038 14.5305ZM12.038 24.5361L9.53797 24.5361L9.53799 24.5435L12.038 24.5361ZM13.2843 25.7824L13.2768 28.2823L13.2843 28.2824L13.2917 28.2823L13.2843 25.7824ZM14.5305 24.5361L17.0305 24.5435L17.0305 24.5361L14.5305 24.5361ZM14.5305 17.0305L24.5361 17.0305L24.5361 12.0305L14.5305 12.0305L14.5305 17.0305ZM24.3432 17.0231C24.8585 17.0629 25.3765 16.9959 25.8646 16.826L24.2218 12.1037C24.3845 12.047 24.5572 12.0247 24.7289 12.038L24.3432 17.0231ZM25.8646 16.826C26.3528 16.6562 26.8005 16.3874 27.1798 16.0363L23.7834 12.3669C23.9098 12.2499 24.0591 12.1603 24.2218 12.1037L25.8646 16.826ZM27.1798 16.0363C27.5591 15.6852 27.8618 15.2595 28.0687 14.7859L23.4871 12.7837C23.5561 12.6258 23.657 12.4839 23.7834 12.3669L27.1798 16.0363ZM28.0687 14.7859C28.2757 14.3123 28.3825 13.8011 28.3825 13.2842L23.3825 13.2843C23.3825 13.112 23.4181 12.9416 23.4871 12.7837L28.0687 14.7859ZM28.3825 13.2842C28.3825 12.7674 28.2757 12.2562 28.0687 11.7826L23.4871 13.7848C23.4181 13.6269 23.3825 13.4565 23.3825 13.2843L28.3825 13.2842ZM28.0687 11.7826C27.8618 11.309 27.5591 10.8833 27.1798 10.5322L23.7834 14.2016C23.657 14.0846 23.5561 13.9427 23.4871 13.7848L28.0687 11.7826ZM27.1798 10.5322C26.8006 10.1812 26.3528 9.91227 25.8646 9.74245L24.2218 14.4648C24.0591 14.4082 23.9098 14.3186 23.7834 14.2016L27.1798 10.5322ZM25.8646 9.74245C25.3765 9.57263 24.8585 9.50556 24.3433 9.54542L24.7289 14.5305C24.5572 14.5438 24.3845 14.5215 24.2218 14.4648L25.8646 9.74245ZM24.5361 9.53797L14.5305 9.53797L14.5305 14.538L24.5361 14.538L24.5361 9.53797ZM17.0305 12.038L17.0305 2.03241L12.0305 2.03241L12.0305 12.038L17.0305 12.038ZM17.0231 1.83957C16.9502 0.8979 16.5247 0.0183942 15.8316 -0.623187L12.4351 3.04617C12.2041 2.83231 12.0623 2.53914 12.038 2.22525L17.0231 1.83957ZM15.8316 -0.623187C15.1384 -1.26477 14.2287 -1.62117 13.2843 -1.62117L13.2843 3.37883C12.9694 3.37883 12.6662 3.26004 12.4351 3.04617L15.8316 -0.623187ZM13.2843 -1.62117C12.3398 -1.62117 11.4301 -1.26477 10.7369 -0.623188L14.1334 3.04617C13.9023 3.26004 13.5991 3.37883 13.2843 3.37883L13.2843 -1.62117ZM10.7369 -0.623188C10.0438 0.0183942 9.61828 0.8979 9.54543 1.83957L14.5305 2.22525C14.5062 2.53914 14.3644 2.83231 14.1334 3.04617L10.7369 -0.623188ZM9.53798 2.03241L9.53798 12.038L14.538 12.038L14.538 2.03241L9.53798 2.03241ZM12.038 9.53797L2.03242 9.53797L2.03242 14.538L12.038 14.538L12.038 9.53797ZM2.02498 9.53798C1.03429 9.54093 0.0850185 9.93578 -0.615513 10.6363L2.92002 14.1718C2.68651 14.4054 2.37008 14.537 2.03986 14.538L2.02498 9.53798ZM-0.615513 10.6363C-1.31605 11.3368 -1.7109 12.2861 -1.71385 13.2768L3.28613 13.2917C3.28515 13.6219 3.15353 13.9383 2.92002 14.1718L-0.615513 10.6363ZM-1.71385 13.2917C-1.7109 14.2824 -1.31604 15.2317 -0.615513 15.9322L2.92002 12.3966C3.15353 12.6302 3.28515 12.9466 3.28613 13.2768L-1.71385 13.2917ZM-0.615513 15.9322C0.0850141 16.6327 1.03429 17.0276 2.02498 17.0305L2.03986 12.0305C2.37009 12.0315 2.68651 12.1631 2.92002 12.3966L-0.615513 15.9322ZM2.03242 17.0305L12.038 17.0305L12.038 12.0305L2.03242 12.0305L2.03242 17.0305ZM9.53798 14.5305L9.53798 24.5361H14.538L14.538 14.5305L9.53798 14.5305ZM9.53799 24.5435C9.54094 25.5342 9.9358 26.4835 10.6363 27.184L14.1719 23.6485C14.4054 23.882 14.537 24.1984 14.538 24.5286L9.53799 24.5435ZM10.6363 27.184C11.3369 27.8845 12.2861 28.2794 13.2768 28.2823L13.2917 23.2824C13.6219 23.2834 13.9383 23.415 14.1719 23.6485L10.6363 27.184ZM13.2917 28.2823C14.2824 28.2794 15.2317 27.8845 15.9322 27.184L12.3967 23.6485C12.6302 23.415 12.9466 23.2834 13.2768 23.2824L13.2917 28.2823ZM15.9322 27.184C16.6327 26.4835 17.0276 25.5342 17.0305 24.5435L12.0305 24.5286C12.0315 24.1984 12.1631 23.882 12.3967 23.6485L15.9322 27.184ZM17.0305 24.5361L17.0305 14.5305L12.0305 14.5305L12.0305 24.5361L17.0305 24.5361Z"
                        fill="#FCFCFC"
                        mask="url(#path-1-inside-1_1511_1741)"
                     />
                  </Svg>
               </Animated.View>
            </TouchableWithoutFeedback>
         </View>
      </View>
   );
};

const styles = StyleSheet.create({
   container: {
      alignItems: "center",
      flex: 1,
      height: 0,
   },
   box: {
      position: "relative",
      width: 60,
      height: 60,
      marginTop: -18,
   },
   addButton: {
      shadowColor: "black",
      shadowOpacity: 0.3,
      shadowOffset: {
         width: 0,
         height: 2,
      },
   },
   addButtonInner: {
      alignItems: "center",
      justifyContent: "center",
      backgroundColor: "#7F3DFF",
      width: 57,
      height: 57,
      borderRadius: 999,
   },
   addButtonIcon: {
      width: 40,
      height: 40,
      tintColor: "white",
   },
   item: {
      position: "absolute",
      top: 5,
      left: 5,
      alignItems: "center",
      justifyContent: "center",
      width: 57,
      height: 57,
      borderRadius: 999,
   },
   itemIcon: {
      width: 32,
      height: 32,
      tintColor: "white",
   },
});

export default AddButton;
